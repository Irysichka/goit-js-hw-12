{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n    const { data } = await axios(\"https://pixabay.com/api/\", {\n            params: {\n                key: \"50837011-c76ef50eb9608d9d0e02a1779\",\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                per_page: 15,\n                page\n            },\n        });\n        return data;\n    } ","import SimpleLightbox from 'simplelightbox';\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".gallery a\")\n\nconst loader = document.querySelector(\".loader\");\nexport const loadMore = document.querySelector(\".load-more\")\n\nconst gallery = document.querySelector('.gallery');\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n   <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>\n    `).join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\n\nexport function showLoadMoreButton() {\n    loadMore.classList.remove(\"load-more-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    loadMore.classList.add(\"load-more-hidden\");\n}","import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    loadMore\n} from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\n\nform.addEventListener(\"submit\", handleSubmit)\nloadMore.addEventListener(\"click\", handleClick)\n\nlet currentPage = 1;\nlet totalImages = 0;\nlet currentQuery = \"\";\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    const query = event.target.elements.searchText.value.trim();\n\n    if (!query) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a search query!\"\n        });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        totalImages = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.info({ title: \"No Results\", message: \"No images found.\" });\n            return;\n        }\n        createGallery(data.hits);\n\n        if (totalImages > currentPage * 15)\n            showLoadMoreButton();\n\n    } catch (error) {\n       iziToast.error({ title: \"Error\", message: \"Failed to fetch images.\" }); \n    } finally {\n        hideLoader();\n    }\n}\n\nasync function handleClick() {\n    currentPage++;\n    hideLoadMoreButton();\n    showLoader();\n    try {\n      const data = await getImagesByQuery(currentQuery, currentPage);\n    createGallery(data.hits);\n\n    if (currentPage * 15 >= totalImages) {\n      iziToast.info({\n        title: \"End of Results\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n\n    scrollGallery();\n  } catch (error) {\n    iziToast.error({ title: \"Error\", message: \"Failed to load more images.\" });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction scrollGallery() {\n  const { height: cardHeight } = document\n    .querySelector(\".gallery\")\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });  \n    }\n"],"names":["getImagesByQuery","query","page","data","axios","lightbox","SimpleLightbox","loader","loadMore","gallery","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","handleSubmit","handleClick","currentPage","totalImages","currentQuery","event","iziToast","scrollGallery","cardHeight"],"mappings":"+vBAEO,eAAeA,EAAiBC,EAAOC,EAAM,CAChD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,2BAA4B,CACjD,OAAQ,CACJ,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAC,CACH,CACb,CAAS,EACD,OAAOC,CACf,CCXA,MAAME,EAAW,IAAIC,EAAe,YAAY,EAE1CC,EAAS,SAAS,cAAc,SAAS,EAClCC,EAAW,SAAS,cAAc,YAAY,EAErDC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,mBAEzFL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,6BAGnBC,CAAK;AAAA,6BACLC,CAAK;AAAA,gCACFC,CAAQ;AAAA,iCACPC,CAAS;AAAA;AAAA;AAAA,KAGrC,EAAE,KAAK,EAAE,EAEVV,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CP,EAAS,QAAO,CACpB,CAGO,SAASe,GAAe,CAC3BX,EAAQ,UAAY,EACxB,CAEO,SAASY,GAAa,CACzBd,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASe,GAAa,CACzBf,EAAO,UAAU,IAAI,QAAQ,CACjC,CAGO,SAASgB,GAAqB,CACjCf,EAAS,UAAU,OAAO,kBAAkB,CAChD,CAEO,SAASgB,GAAqB,CACjChB,EAAS,UAAU,IAAI,kBAAkB,CAC7C,CClCA,MAAMiB,EAAO,SAAS,cAAc,OAAO,EAE3CA,EAAK,iBAAiB,SAAUC,CAAY,EAC5ClB,EAAS,iBAAiB,QAASmB,CAAW,EAE9C,IAAIC,EAAc,EACdC,EAAc,EACdC,EAAe,GAEnB,eAAeJ,EAAaK,EAAO,CAC/BA,EAAM,eAAc,EACpB,MAAM9B,EAAQ8B,EAAM,OAAO,SAAS,WAAW,MAAM,OAErD,GAAI,CAAC9B,EAAO,CACR+B,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACrB,CAAS,EACD,MACH,CAEDF,EAAe7B,EACf2B,EAAc,EACdR,IACAI,IACAH,IAEA,GAAI,CACA,MAAMlB,EAAO,MAAMH,EAAiB8B,EAAcF,CAAW,EAG7D,GAFAC,EAAc1B,EAAK,UAEfA,EAAK,KAAK,SAAW,EAAG,CACxB6B,EAAS,KAAK,CAAE,MAAO,aAAc,QAAS,kBAAkB,CAAE,EAClE,MACH,CACDtB,EAAcP,EAAK,IAAI,EAEnB0B,EAAcD,EAAc,IAC5BL,GAEP,MAAe,CACbS,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,yBAAyB,CAAE,CAC5E,QAAc,CACNV,GACH,CACL,CAEA,eAAeK,GAAc,CACzBC,IACAJ,IACAH,IACA,GAAI,CACF,MAAMlB,EAAO,MAAMH,EAAiB8B,EAAcF,CAAW,EAC/DlB,EAAcP,EAAK,IAAI,EAEnByB,EAAc,IAAMC,GACtBG,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACjB,CAAO,EACDR,KAEAD,IAGFU,GACD,MAAe,CACdD,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,6BAA6B,CAAE,CAC7E,QAAY,CACRV,GACD,CACH,CAEA,SAASW,GAAgB,CACvB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}